Here's a Replit prompt to auto-select the customer in the billing dropdown when redirecting from appointment right-click:

**Replit Integration Prompt for Auto-Customer Selection:**

**1. Update the Context Menu Redirect Function**
In your JavaScript, modify the `redirectToBilling` function to properly extract and pass the client data:

```javascript
function redirectToBilling(clientId, appointmentId) {
    // Extract client info from appointment data
    const appointment = scheduleData.appointments.find(apt => 
        apt.id == appointmentId || apt.appointment_id == appointmentId
    );
    
    if (appointment) {
        const clientName = appointment.clientName || appointment.client_name;
        const clientPhone = appointment.clientPhone || appointment.client_phone;
        
        // Redirect with both client ID and name for better matching
        window.location.href = `/integrated-billing/${clientId}?client_name=${encodeURIComponent(clientName)}&client_phone=${encodeURIComponent(clientPhone)}&appointment_id=${appointmentId}`;
    }
}
```

**2. Backend Route Enhancement**
Update your Flask route to handle the client parameter:

```python
@app.route('/integrated-billing/<client_id>')
def integrated_billing(client_id):
    client_name = request.args.get('client_name', '')
    client_phone = request.args.get('client_phone', '')
    appointment_id = request.args.get('appointment_id', '')
    
    return render_template('integrated_billing.html', 
                         preselected_client_id=client_id,
                         preselected_client_name=client_name,
                         preselected_client_phone=client_phone,
                         appointment_id=appointment_id)
```

**3. Frontend Auto-Selection**
In your billing page JavaScript, add auto-selection logic:

```javascript
document.addEventListener('DOMContentLoaded', function() {
    const urlParams = new URLSearchParams(window.location.search);
    const preselectedClientId = "{{ preselected_client_id }}";
    const clientName = urlParams.get('client_name');
    
    if (preselectedClientId) {
        const customerDropdown = document.getElementById('customerSelect');
        if (customerDropdown) {
            customerDropdown.value = preselectedClientId;
            // Trigger change event to load customer data
            customerDropdown.dispatchEvent(new Event('change'));
        }
    }
});
```

**4. Verify Client Data Flow**
Check that your appointment data includes proper client_id references and that the billing page customer dropdown is populated with matching IDs.

This ensures seamless transition from appointment context menu to billing with the correct customer pre-selected.