You’re working on a SPA with HTML/CSS/vanilla JS, Python backend (Flask or FastAPI), and SQLite.
The page includes elements like #multiBookModal, updateSummary(), loadBookings(), renderBookings(), and a context menu with “View Details”.
Bug: price is shown as 0 (₹0) and the summary uses “$”.

GOAL
- Show the real service/appointment price everywhere.
- Use INR formatting (₹, Indian numbering).
- Never default missing values to 0 (show — instead).

SCOPE
- Frontend: the HTML file that contains #multiBookModal and updateSummary().
- Backend: the JSON returned by GET /api/unaki/get-bookings and GET /api/unaki/bookings/<id> (or equivalent details endpoint).

CHANGES TO MAKE

A) BACKEND — return a reliable price in paise
1) In the handler for GET /api/unaki/get-bookings (and the details endpoint used by “View Details”):
   - JOIN services and coalesce price into an integer `price_paise`.
   - If DB stores rupees as float, convert: CAST(ROUND(x * 100) AS INTEGER).
   - Don’t default to 0; return null if unknown.

SQL pattern to use in both list and details queries:
  COALESCE(a.price_paise,
           CAST(ROUND(a.price * 100) AS INTEGER),
           s.price_paise,
           CAST(ROUND(s.price * 100) AS INTEGER)) AS price_paise

Return JSON keys at least: id, client_name, service_names (or service_name), duration, start_time, end_time, staff_id, price_paise.

(OPTIONAL) When creating/booking, also persist the snapshot price into appointments.price_paise so future service price changes don’t retroactively alter past appointments.

B) FRONTEND — stop forcing 0; format as INR
1) In the service <option> markup inside the template, keep:
   data-duration="{{ service.duration or 60 }}"
   data-price="{{ service.price }}"
   (If you also add price_paise to service, expose it as data-price-paise="{{ (service.price*100)|int }}".)

2) In updateSummary():
   - Remove the `|| 0` fallback that hides missing values.
   - Prefer price_paise if present; else parse data-price as rupees.
   - Format total as INR.

Patch (apply inside the <script> of this file):
--- JS before
const price = parseFloat(selectedOption.dataset.price) || 0;
totalPrice += price;
document.getElementById('multiTotalPrice').textContent = `$${totalPrice.toFixed(2)}`;
--- JS after
const pricePaiseAttr = selectedOption.dataset.pricePaise;
const pricePaiseNum = pricePaiseAttr !== undefined ? Number(pricePaiseAttr) : NaN;
let priceRupees;
if (Number.isFinite(pricePaiseNum)) {
  priceRupees = pricePaiseNum / 100;
} else {
  const p = parseFloat(selectedOption.dataset.price);
  priceRupees = Number.isFinite(p) ? p : null;
}
if (priceRupees !== null) totalPrice += priceRupees;

const nfINR = new Intl.NumberFormat('en-IN', { style: 'currency', currency: 'INR' });
document.getElementById('multiTotalPrice').textContent =
  Number.isFinite(totalPrice) ? nfINR.format(totalPrice) : '—';

3) Add a small INR formatter utility near the top of the <script>:
const INR = new Intl.NumberFormat('en-IN', { style: 'currency', currency: 'INR' });

C) APPOINTMENT DETAILS — show correct price instead of ₹0
1) Implement a real details modal (Bootstrap) if it doesn’t exist yet.
   - Create a hidden <div id="appointmentDetailsModal" class="modal">…</div> with a <span id="detailsPrice"> element.
2) Replace the current viewAppointmentDetails() stub to fetch one appointment, use price_paise to render price.

Patch for the function:
--- JS before
function viewAppointmentDetails() {
  if (selectedAppointmentId) {
    alert('View details for appointment ' + selectedAppointmentId);
  }
  hideContextMenu();
}
--- JS after
function viewAppointmentDetails() {
  if (!selectedAppointmentId) { hideContextMenu(); return; }
  fetch(`/api/unaki/bookings/${selectedAppointmentId}`)
    .then(r => r.json())
    .then(appt => {
      const rupees = Number.isFinite(appt.price_paise) ? appt.price_paise / 100
                    : (typeof appt.price === 'number' ? appt.price : null);
      const priceText = (rupees === null) ? '—' : INR.format(rupees);
      // fill modal fields here:
      document.getElementById('detailsPrice').textContent = priceText;
      // fill other fields (client, phone, service, duration, status, etc.) from appt
      const m = new bootstrap.Modal(document.getElementById('appointmentDetailsModal'));
      m.show();
    })
    .catch(() => alert('Unable to load appointment details.'));
  hideContextMenu();
}

D) OPTIONAL POLISH
- In renderBookings(), if bookingsData includes price_paise, add a tooltip with the INR price.
  Example: block.title = `Price: ${INR.format(booking.price_paise / 100)}`;
- In the Summary cards, change the labels and outputs to INR consistently.

VALIDATION
1) Open the booking page, pick a service with a non-zero price, add to summary → “Total Price” shows ₹ with Indian formatting (e.g., ₹1,200.00), never defaulting to ₹0 unless truly zero.
2) Open context menu → View Details → Price shows INR from price_paise.
3) Reload and open the same appointment → still correct.
4) If a service has no price, “—” is shown (not ₹0).

OUTPUT
- Provide unified diff patches for:
  - the Python route(s) returning bookings and appointment details,
  - this HTML/JS file (updateSummary, INR formatter, viewAppointmentDetails, modal markup).
- Then list any commands you executed.
- Then give final manual test steps as above.
