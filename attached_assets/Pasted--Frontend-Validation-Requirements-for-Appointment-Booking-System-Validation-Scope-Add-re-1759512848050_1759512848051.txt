# Frontend Validation Requirements for Appointment Booking System

## Validation Scope

Add **real-time validation** to the Multi-Appointment Booking Modal with the following rules:

---

## 1. CLIENT SELECTION VALIDATION

**Field:** `#multiClientSelect`

**Rules:**
- Required field
- Must select a valid client (value cannot be empty)
- Show error immediately when trying to proceed without selection

**Error Message:** "Please select a client before booking"

---

## 2. SERVICE VALIDATION (Per Appointment)

**Field:** `.service-select` in each `.appointment-card`

**Rules:**
- Required for each appointment
- Cannot be empty
- Validate on blur and on form submit

**Error Message:** "Service is required for Appointment #X"

---

## 3. STAFF VALIDATION (Per Appointment)

**Field:** `.staff-select` in each `.appointment-card`

**Rules:**
- **CRITICAL:** Required for every appointment
- Cannot be empty
- Must validate before allowing booking
- Show error immediately on blur if empty

**Error Message:** "Staff member is required for Appointment #X"

---

## 4. DATE VALIDATION (Per Appointment)

**Field:** `.appointment-date` in each `.appointment-card`

**Rules:**
- Required field
- Cannot be in the past (must be today or future)
- Format: YYYY-MM-DD
- Validate on change

**Error Messages:**
- Empty: "Date is required for Appointment #X"
- Past: "Cannot book appointments in the past"

---

## 5. TIME VALIDATION (Per Appointment)

**Field:** `.start-time` in each `.appointment-card`

**Rules:**
- Required field
- Must be between 09:00 and 21:00 (business hours)
- If date is today, time must be in future
- Format: HH:MM

**Error Messages:**
- Empty: "Start time is required for Appointment #X"
- Outside hours: "Time must be between 9:00 AM and 9:00 PM"
- Past time: "Cannot book appointments in the past"

---

## 6. CONFLICT DETECTION

**Check:**
- Same staff + same date + overlapping times = CONFLICT
- Check against existing bookings in `bookingsData`
- Check against other appointments in current booking session

**Error Message:** "Staff member is already booked from HH:MM to HH:MM"

**Visual Indicator:**
- Add `.duplicate` class to conflicting appointment card
- Show warning alert with conflict details
- Disable submit button until resolved

---

## 7. END TIME AUTO-CALCULATION

**Field:** `.end-time` in each `.appointment-card`

**Rules:**
- Auto-calculate based on service duration
- Update immediately when service or start time changes
- Read-only field (user cannot edit)
- Display in success color (green)

---

## 8. SUBMIT BUTTON VALIDATION

**Button:** "Book All Appointments"

**Enable only when:**
1. Client is selected
2. All appointments have service selected
3. All appointments have staff selected
4. All appointments have valid date
5. All appointments have valid start time
6. No conflicts exist

**Disabled state:**
- Add `.submit-btn-disabled` class
- Show tooltip: "Please complete all required fields"

---

## Implementation Requirements

### Real-time Validation
```javascript
// Validate on:
- blur (when field loses focus)
- change (when value changes)
- input (for text inputs)
- before submit
```

### Visual Feedback
```javascript
// Add classes:
- .is-invalid (red border, red background)
- .is-valid (green border, green background)

// Show messages:
- .validation-error (red text below field)
- .validation-success (green checkmark)
```

### Validation Summary
```javascript
// Show at top of modal:
- List all validation errors
- Update dynamically as user fixes issues
- Hide when all errors resolved
```

### Prevent Submission
```javascript
// Block form submission if:
1. Any validation fails
2. Show alert with first error
3. Focus on first invalid field
4. Prevent API call completely
```

---

## Priority Order

1. **CRITICAL:** Staff assignment validation
2. Client selection validation
3. Service selection validation
4. Date/Time validation
5. Conflict detection
6. Visual feedback improvements

---

## Expected Behavior

**Before clicking "Book All Appointments":**
- All fields validated in real-time
- Submit button disabled if any errors
- Clear error messages shown
- User cannot proceed with invalid data

**On clicking "Book All Appointments":**
- Final validation check
- If errors exist: show alert, focus first error
- If valid: proceed with booking
- No invalid data reaches the backend

---

This ensures **100% data quality** before any API calls are made, preventing the database errors you encountered.