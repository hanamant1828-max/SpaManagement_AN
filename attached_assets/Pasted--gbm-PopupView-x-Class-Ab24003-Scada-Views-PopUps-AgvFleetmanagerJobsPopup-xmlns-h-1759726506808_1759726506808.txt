<gbm:PopupView x:Class="Ab24003.Scada.Views.PopUps.AgvFleetmanagerJobsPopup"
               xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
               xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
               xmlns:gbm="http://gbm.com/components"
               xmlns:vw="http://inosoft.com/visiwin7"
               xmlns:syncfusion="http://schemas.syncfusion.com/wpf"
               Width="800" Height="450">

    <!-- Styles and Data -->
    <gbm:PopupView.Resources>

        <!-- Level 0 Hard-coded Data (XML Format) -->
        <XmlDataProvider x:Key="Level0Data" XPath="/Jobs/Job">
            <x:XData>
                <Jobs xmlns="">
                    <Job Index="1" ID="JOB001" Type="Transport" VehicleType="Forklift" AgvID="AGV-101" Priority="High" Source="WH-A01" Target="WH-B05" Status="In Progress"/>
                    <Job Index="2" ID="JOB002" Type="Pickup" VehicleType="Pallet Jack" AgvID="AGV-102" Priority="Medium" Source="WH-C12" Target="WH-A03" Status="Queued"/>
                    <Job Index="3" ID="JOB003" Type="Delivery" VehicleType="Forklift" AgvID="AGV-103" Priority="Low" Source="WH-B08" Target="WH-D15" Status="Completed"/>
                    <Job Index="4" ID="JOB004" Type="Transport" VehicleType="Tugger" AgvID="AGV-101" Priority="High" Source="WH-A05" Target="WH-C20" Status="In Progress"/>
                    <Job Index="5" ID="JOB005" Type="Pickup" VehicleType="Forklift" AgvID="AGV-104" Priority="Medium" Source="WH-D01" Target="WH-A10" Status="Waiting"/>
                    <Job Index="6" ID="JOB006" Type="Delivery" VehicleType="Pallet Jack" AgvID="AGV-102" Priority="High" Source="WH-B12" Target="WH-C08" Status="In Progress"/>
                    <Job Index="7" ID="JOB007" Type="Transport" VehicleType="Forklift" AgvID="AGV-105" Priority="Low" Source="WH-A15" Target="WH-B20" Status="Queued"/>
                    <Job Index="8" ID="JOB008" Type="Pickup" VehicleType="Tugger" AgvID="AGV-103" Priority="Medium" Source="WH-C05" Target="WH-D10" Status="Completed"/>
                    <Job Index="9" ID="JOB009" Type="Delivery" VehicleType="Forklift" AgvID="AGV-101" Priority="High" Source="WH-B03" Target="WH-A18" Status="In Progress"/>
                    <Job Index="10" ID="JOB010" Type="Transport" VehicleType="Pallet Jack" AgvID="AGV-106" Priority="Low" Source="WH-D20" Target="WH-C15" Status="Waiting"/>
                </Jobs>
            </x:XData>
        </XmlDataProvider>

        <!-- Level 7 Hard-coded Data (XML Format) -->
        <XmlDataProvider x:Key="Level7Data" XPath="/Jobs/Job">
            <x:XData>
                <Jobs xmlns="">
                    <Job Index="1" ID="JOB101" Type="Material Flow" VehicleType="AMR" AgvID="AGV-201" Priority="Critical" Source="PROD-A01" Target="PROD-B05" Status="Active"/>
                    <Job Index="2" ID="JOB102" Type="Assembly Line" VehicleType="AMR" AgvID="AGV-202" Priority="High" Source="PROD-C12" Target="PROD-A03" Status="Scheduled"/>
                    <Job Index="3" ID="JOB103" Type="Quality Check" VehicleType="AGV" AgvID="AGV-203" Priority="Medium" Source="PROD-B08" Target="PROD-D15" Status="Complete"/>
                    <Job Index="4" ID="JOB104" Type="Material Flow" VehicleType="Tugger" AgvID="AGV-201" Priority="Critical" Source="PROD-A05" Target="PROD-C20" Status="Active"/>
                    <Job Index="5" ID="JOB105" Type="Assembly Line" VehicleType="AMR" AgvID="AGV-204" Priority="High" Source="PROD-D01" Target="PROD-A10" Status="Pending"/>
                    <Job Index="6" ID="JOB106" Type="Quality Check" VehicleType="AGV" AgvID="AGV-202" Priority="Critical" Source="PROD-B12" Target="PROD-C08" Status="Active"/>
                    <Job Index="7" ID="JOB107" Type="Material Flow" VehicleType="AMR" AgvID="AGV-205" Priority="Medium" Source="PROD-A15" Target="PROD-B20" Status="Scheduled"/>
                    <Job Index="8" ID="JOB108" Type="Assembly Line" VehicleType="Tugger" AgvID="AGV-203" Priority="High" Source="PROD-C05" Target="PROD-D10" Status="Complete"/>
                    <Job Index="9" ID="JOB109" Type="Quality Check" VehicleType="AMR" AgvID="AGV-201" Priority="Critical" Source="PROD-B03" Target="PROD-A18" Status="Active"/>
                    <Job Index="10" ID="JOB110" Type="Material Flow" VehicleType="AGV" AgvID="AGV-206" Priority="Medium" Source="PROD-D20" Target="PROD-C15" Status="Pending"/>
                </Jobs>
            </x:XData>
        </XmlDataProvider>

        <!-- Pill toggle used as Level 0 / Level 7 switch -->
        <Style x:Key="LevelTogglePillStyle" TargetType="gbm:ToggleButton">
            <Setter Property="Width"  Value="210"/>
            <Setter Property="Height" Value="36"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="gbm:ToggleButton">
                        <Grid Width="210" Height="36">
                            <Border Background="#DCDCDC" BorderBrush="Gray" BorderThickness="1" CornerRadius="5"/>
                            <Border x:Name="Thumb" Width="105" Height="32" Margin="2"
                                    HorizontalAlignment="Left" VerticalAlignment="Center"
                                    Background="{DynamicResource NavigationBackgroundBrush}" CornerRadius="5"/>
                            <Grid>
                                <gbm:TextBlock x:Name="LeftText"  Margin="25,0,0,0"
                                               HorizontalAlignment="Left" VerticalAlignment="Center"
                                               FontSize="16" FontWeight="Bold" Foreground="White" Text="Level 0"/>
                                <gbm:TextBlock x:Name="RightText" Margin="0,0,25,0"
                                               HorizontalAlignment="Right" VerticalAlignment="Center"
                                               FontSize="16" FontWeight="Bold" Foreground="Black" Text="Level 7"/>
                            </Grid>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="Thumb" Property="Margin" Value="103,2,2,2"/>
                                <Setter TargetName="RightText" Property="Foreground" Value="White"/>
                                <Setter TargetName="LeftText"  Property="Foreground" Value="Black"/>
                            </Trigger>
                            <Trigger Property="IsChecked" Value="False">
                                <Setter TargetName="Thumb" Property="Margin" Value="2,2,103,2"/>
                                <Setter TargetName="LeftText"  Property="Foreground" Value="White"/>
                                <Setter TargetName="RightText" Property="Foreground" Value="Black"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Read-only Syncfusion grid style + black borders like screenshot -->
        <Style x:Key="ReadOnlyGrid" TargetType="syncfusion:SfDataGrid">
            <Setter Property="AutoGenerateColumns" Value="False"/>
            <Setter Property="AllowEditing" Value="False"/>
            <Setter Property="AllowSorting" Value="True"/>
            <Setter Property="SelectionUnit" Value="Row"/>
            <Setter Property="ColumnSizer" Value="Star"/>
            <Setter Property="GridLinesVisibility" Value="Both"/>
            <Setter Property="BorderBrush" Value="Black"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="HeaderRowHeight" Value="30"/>
            <Setter Property="RowHeight" Value="28"/>
        </Style>
    </gbm:PopupView.Resources>

    <!-- Layout -->
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="10"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="10"/>
        </Grid.ColumnDefinitions>

        <!-- Title -->
        <gbm:Label Grid.Row="0" Grid.Column="1"
                   Content="Jobs"
                   FontSize="18" FontWeight="Bold"
                   HorizontalAlignment="Left" VerticalAlignment="Center"
                   Margin="0,6,0,6"/>

        <!-- Centered Level 0 / Level 7 switch -->
        <gbm:ToggleButton x:Name="LevelToggle"
                          Grid.Row="1" Grid.Column="1"
                          HorizontalAlignment="Center"
                          Margin="0,4,0,6"
                          Style="{StaticResource LevelTogglePillStyle}"/>

        <!-- Outer content border -->
        <Border Grid.Row="2" Grid.Column="1" Margin="10"
                BorderBrush="Black" BorderThickness="1" Background="White">
            <Grid>

                <!-- LEVEL 0 -->
                <Grid x:Name="Level0View">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Inner header row (Amount Jobs) inside the big border -->
                    <Border Grid.Row="0" BorderBrush="Black" BorderThickness="0,0,0,1" Background="#F6F6F6" Padding="10,6">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="8"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <gbm:Label Grid.Column="0" Content="Amount Jobs :"/>
                            <gbm:Label Grid.Column="2" Content="10"/>
                        </Grid>
                    </Border>

                    <!-- Data grid with XML binding -->
                    <syncfusion:SfDataGrid Grid.Row="1" Margin="10"
                                           Style="{StaticResource ReadOnlyGrid}"
                                           ItemsSource="{Binding Source={StaticResource Level0Data}}">
                        <syncfusion:SfDataGrid.Resources>
                            <!-- thick black borders like the mock -->
                            <Style TargetType="syncfusion:GridCell">
                                <Setter Property="BorderBrush" Value="Black"/>
                                <Setter Property="BorderThickness" Value="1"/>
                            </Style>
                            <Style TargetType="syncfusion:GridHeaderCellControl">
                                <Setter Property="BorderBrush" Value="Black"/>
                                <Setter Property="BorderThickness" Value="1"/>
                                <Setter Property="FontWeight" Value="Bold"/>
                            </Style>
                        </syncfusion:SfDataGrid.Resources>

                        <syncfusion:SfDataGrid.Columns>
                            <syncfusion:GridTextColumn MappingName="@Index"        HeaderText="Index"/>
                            <syncfusion:GridTextColumn MappingName="@ID"           HeaderText="Job ID"/>
                            <syncfusion:GridTextColumn MappingName="@Type"         HeaderText="Type"/>
                            <syncfusion:GridTextColumn MappingName="@VehicleType"  HeaderText="Vehicle Type"/>
                            <syncfusion:GridTextColumn MappingName="@AgvID"        HeaderText="AGV ID"/>
                            <syncfusion:GridTextColumn MappingName="@Priority"     HeaderText="Prio."/>
                            <syncfusion:GridTextColumn MappingName="@Source"       HeaderText="Source"/>
                            <syncfusion:GridTextColumn MappingName="@Target"       HeaderText="Target"/>
                            <syncfusion:GridTextColumn MappingName="@Status"       HeaderText="Status"/>
                        </syncfusion:SfDataGrid.Columns>
                    </syncfusion:SfDataGrid>

                    <!-- Visible when toggle is unchecked -->
                    <Grid.Style>
                        <Style TargetType="Grid">
                            <Setter Property="Visibility" Value="Visible"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding IsChecked, ElementName=LevelToggle}" Value="True">
                                    <Setter Property="Visibility" Value="Collapsed"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Grid.Style>
                </Grid>

                <!-- LEVEL 7 -->
                <Grid x:Name="Level7View">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <Border Grid.Row="0" BorderBrush="Black" BorderThickness="0,0,0,1" Background="#F6F6F6" Padding="10,6">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="8"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <gbm:Label Grid.Column="0" Content="Amount Jobs :"/>
                            <gbm:Label Grid.Column="2" Content="10"/>
                        </Grid>
                    </Border>

                    <!-- Data grid with XML binding -->
                    <syncfusion:SfDataGrid Grid.Row="1" Margin="10"
                                           Style="{StaticResource ReadOnlyGrid}"
                                           ItemsSource="{Binding Source={StaticResource Level7Data}}">
                        <syncfusion:SfDataGrid.Resources>
                            <Style TargetType="syncfusion:GridCell">
                                <Setter Property="BorderBrush" Value="Black"/>
                                <Setter Property="BorderThickness" Value="1"/>
                            </Style>
                            <Style TargetType="syncfusion:GridHeaderCellControl">
                                <Setter Property="BorderBrush" Value="Black"/>
                                <Setter Property="BorderThickness" Value="1"/>
                                <Setter Property="FontWeight" Value="Bold"/>
                            </Style>
                        </syncfusion:SfDataGrid.Resources>

                        <syncfusion:SfDataGrid.Columns>
                            <syncfusion:GridTextColumn MappingName="@Index"        HeaderText="Index"/>
                            <syncfusion:GridTextColumn MappingName="@ID"           HeaderText="Job ID"/>
                            <syncfusion:GridTextColumn MappingName="@Type"         HeaderText="Type"/>
                            <syncfusion:GridTextColumn MappingName="@VehicleType"  HeaderText="Vehicle Type"/>
                            <syncfusion:GridTextColumn MappingName="@AgvID"        HeaderText="AGV ID"/>
                            <syncfusion:GridTextColumn MappingName="@Priority"     HeaderText="Prio."/>
                            <syncfusion:GridTextColumn MappingName="@Source"       HeaderText="Source"/>
                            <syncfusion:GridTextColumn MappingName="@Target"       HeaderText="Target"/>
                            <syncfusion:GridTextColumn MappingName="@Status"       HeaderText="Status"/>
                        </syncfusion:SfDataGrid.Columns>
                    </syncfusion:SfDataGrid>

                    <!-- Visible when toggle is checked -->
                    <Grid.Style>
                        <Style TargetType="Grid">
                            <Setter Property="Visibility" Value="Collapsed"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding IsChecked, ElementName=LevelToggle}" Value="True">
                                    <Setter Property="Visibility" Value="Visible"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Grid.Style>
                </Grid>

            </Grid>
        </Border>
    </Grid>
</gbm:PopupView>