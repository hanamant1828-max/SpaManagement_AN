ChatGPT said:

Here’s a tight, copy-paste prompt you can give to the Replit assistant:

Replit Assistant Prompt

I’m getting a runtime error on /integrated-billing/17:

Uncaught ReferenceError: addUnakiAppointmentToBill is not defined
filename: /integrated-billing/17
lineno: 616 colno: 176


Please fix this end-to-end. Do the following (don’t ask me questions—just implement):

Find & wire the function

Search the repo for addUnakiAppointmentToBill.

If it already exists, ensure it’s imported in the page’s JS entry and exposed for existing inline handlers:

import { addUnakiAppointmentToBill } from "<correct-path>";
window.addUnakiAppointmentToBill = addUnakiAppointmentToBill;


If it does not exist, create src/billing/addUnakiAppointmentToBill.(ts|js) with:

export async function addUnakiAppointmentToBill({ appointmentId, billId, price }) {
  if (!appointmentId || !billId) throw new Error("Missing ids");
  // TODO: integrate with existing billing API/store
  console.debug("Adding Unaki appt to bill", { appointmentId, billId, price });
  return true;
}


Then import it and attach to window as above.

Prefer a cleaner listener (if easy)

Replace any onclick="addUnakiAppointmentToBill(...)" with a button using data attributes:

<button
  data-action="add-unaki-appointment"
  data-appointment-id="..."
  data-bill-id="..."
  data-price="..."
>Add</button>


In the page script:

import { addUnakiAppointmentToBill } from "../billing/addUnakiAppointmentToBill";
document.addEventListener("DOMContentLoaded", () => {
  const btn = document.querySelector('[data-action="add-unaki-appointment"]');
  if (!btn) return;
  btn.addEventListener("click", async (e) => {
    const el = e.currentTarget;
    try {
      await addUnakiAppointmentToBill({
        appointmentId: el.dataset.appointmentId,
        billId: el.dataset.billId,
        price: Number(el.dataset.price),
      });
    } catch (err) {
      console.error("Failed to add appointment to bill", err);
      alert("Couldn’t add appointment to bill. Please try again.");
    }
  });
});


If refactoring breaks other inline calls, keep the window. shim for backward compatibility and leave a TODO to migrate remaining handlers.

Script/bundler sanity

Ensure the page includes the correct module script (e.g., <script type="module" src="/src/main.(ts|js)"></script>).

Make sure tree-shaking doesn’t drop the function—explicitly reference it as above.

Acceptance criteria

Loading /integrated-billing/17 does not throw ReferenceError.

Clicking the “Add” button triggers the function and no global error spam appears.

Basic error handling (try/catch + user message) is present.

Commit

Commit with: fix(billing): define and wire addUnakiAppointmentToBill; add listener + window shim; handle errors

Please implement the minimal changes to pass the acceptance criteria and run the app to verify there are no console errors on /integrated-billing/17.

You said:
Dont give the code just give me prompt
ChatGPT said:

Here’s a clean, ready-to-use prompt you can paste directly into the Replit assistant (without code included):

Prompt for Replit Assistant

I’m getting this runtime error on /integrated-billing/17:

Uncaught ReferenceError: addUnakiAppointmentToBill is not defined
filename: /integrated-billing/17
lineno: 616 colno: 176


Please fix this end-to-end by doing the following:

Locate the addUnakiAppointmentToBill function in the codebase.

If it exists, make sure it is imported into the correct entry point and properly attached so that existing inline handlers can call it.

If it doesn’t exist, create it in a billing-related module and wire it up consistently with the rest of the billing functions.

Ensure that the function is available to both inline onclick calls (via a global shim) and modern event listeners (via a module import).

Refactor inline onclick="addUnakiAppointmentToBill(...)" calls to use event listeners with data attributes, but keep backward compatibility if needed.

Double-check that the page loads without ReferenceError, the button works as intended, and user-facing errors are handled gracefully.

Commit the fix with a clear message (e.g. fix(billing): define and wire addUnakiAppointmentToBill).

Acceptance criteria:

Visiting /integrated-billing/17 no longer throws the ReferenceError.

Clicking the “Add” button executes the intended behavior without console errors.

Errors are logged clearly and handled in the UI.